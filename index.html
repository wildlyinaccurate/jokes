<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Jokes</title>

        <style>
            #joke {
                font-family: sans-serif;
                padding-top: 10rem;
                text-align: center;
            }
        </style>
    </head>
    <body>
        <div id="joke">
            <h1 id="question"></h1>
            <h1 id="punchline"></h1>
        </div>

        <script>
            fetch('jokes.json')
                .then(response => response.json())
                .then(jokes => {
                    const l = jokes.length
                    let questionIdx = r(l)
                    let punchlineIdx = r(l)

                    while (questionIdx === punchlineIdx) {
                        // Whoa whoa whoa! We can't have a punchline that matches
                        // the question! Better keep going until we find a
                        // punchline that has no relation to the question
                        punchlineIdx = r(l)
                    }

                    const question = jokes[questionIdx][0]
                    const punchline = jokes[punchlineIdx][1]

                    document.getElementById('question').textContent = question
                    document.getElementById('punchline').textContent = punchline
                })

            function r(n) {
                return Math.floor(Math.random() * n)
            }
        </script>
    </body>
</html>
